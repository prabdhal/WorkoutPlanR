@model WorkoutPlannerWebApp.ViewModels.MyWorkoutProgramsViewModels.ViewWorkoutPhaseViewModel

@{
    ViewData["Title"] = "Edit Workout Program";
}

<h1>Edit Workout Program</h1>
<br />
<div>
    <h2>@Model.WorkoutProgram.Name</h2>
    <dl class="row">
        <dt class="col-2">Difficulty</dt>
        <dd class="col-10">@Model.WorkoutProgram.Difficulty</dd>
        <dt class="col-2">Updated On</dt>
        <dd class="col-10">@Model.WorkoutProgram.UpdatedOn.ToString("MM/dd/yy hh:mm tt")</dd>    
        <dt class="col-2">Description</dt>
        <dd class="col-10">@Model.WorkoutProgram.Description</dd>
        <dt>Program Detail</dt>
        <dd>@Model.WorkoutProgram.ProgramDetails</dd>
    </dl>
    <hr />

    <h3>Workout Phases</h3>
    <div class="col-auto">
        <a asp-action="CreateWorkoutPhase" asp-route-id="@Model?.WorkoutProgram.Id" class="btn btn-primary">Add Workout Phase</a>
    </div>

    @if (!Model.WorkoutPhases.Any())
    {
        <p>You have not added any workout phases as of yet</p>
    }
    else
    {
    @foreach (var phase in Model.WorkoutPhases)
    {
    <div class="container py-3">
        <div class="split-row">
            <div class="split-row-col">
                <h4>@phase.Name</h4>
                <div>@phase.Duration</div>
                <div><p>@phase.PhaseDetails</p></div>
            </div>
            <div class="split-row-col">
                <a asp-action="EditWorkoutPhase" asp-route-id="@Model.WorkoutProgram.Id" class="btn btn-success">Edit Phase</a>
                <form asp-action="DeleteWorkoutPhase" asp-route-id="@phase.Id">    
                    <button type="submit" class="btn btn-danger">Delete Phase</button>
                </form>
            </div>
        </div>
        <div>
            @foreach (var day in @phase.WorkoutDays)
            {
            <div class="container">
                <div class="split-row">
                    <div class="split-row-col">
                        <h5>Day @day.DayNumber: @day.Name</h5>
                        <p>@day.Description</p>
                    </div>
                    <div class="split-row-col">
                        <div>
                            <a class="btn btn-primary" asp-area="" asp-controller="MyWorkoutPrograms" asp-action="CreateExercise" asp-route-id="@day.Id">Add Exercises</a>
                        </div>
                        <a asp-action="EditWorkoutDay" asp-route-id="@day.Id" class="btn btn-success col-auto">Edit Day</a>
                        @*<form class="flex col-auto" asp-action="ClearWorkoutDay" asp-route-id="@day.Id">   
                            <input asp-for="WorkoutProgram.Id" readonly hidden />
                            <input asp-for="WorkoutPhase.Id" readonly hidden />
                            <button type="submit" class="btn btn-danger">Reset Day</button>
                        </form>*@
                    </div>
                </div>
                @if (!day.CustomExercises.Any())
                {
                }
                else
                {
                <table class="table table-striped table-hover table-responsive">
                    <caption>List of exercises</caption>
                    <thead class="table-dark">
                        <tr>
                            <th scope="col">Exercise</th>
                            <th scope="col">Sets x Reps</th>
                            <th scope="col">Rest</th>
                        </tr>
                    </thead>
                    <tbody> 
                    @foreach (var exercise in @day.CustomExercises)
                    {
                        <tr>
                            <td>@exercise.Exercise.Name</td>
                            @if (@exercise.MaxRepetition == null || @exercise.MaxRepetition <= 0)
                            {
                            <td>@exercise.Sets x @exercise.MinRepetition</td>
                            } else
                            {
                            <td>@exercise.Sets x @exercise.MinRepetition - @exercise.MaxRepetition</td>  
                            }
                            <td>@exercise.RestInterval mins</td>
                        </tr>
                    }     
                    </tbody>
                </table>
                }
            </div>
            }
            </div>
        </div>
    } 
    }
</div>
<br />

<div class="row justify-content-between">
    <span class="col-auto">
        <a asp-action="Edit" asp-route-id="@Model?.WorkoutProgram.Id" class="btn btn-secondary">Back</a>
    </span>
    <span class="col-auto">
        <a asp-action="Details" asp-route-id="@Model?.WorkoutProgram.Id" class="btn btn-success">Finish</a>
    </span>
</div>  


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
